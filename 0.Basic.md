<!--
 * @Date: 2024-11-10
 * @LastEditors: GoKo-Son626
 * @LastEditTime: 2024-11-20
 * @FilePath: /1-STM32MP157/0.Basic.md
 * @Description: 
-->
# Basic

1. 驱动文件加载
```c
cp xxx.ko /rootfs/lib/moudles/5.4.31/
cd /rootfs/lib/moudles/5.4.31/
depmod
modprobe xxx.ko
lsmod
rmmod xxx.ko
lsmod
```
2. APP执行
```c
mknod /dev/xxx c major x //添加设备节点
./xxxApp /dev/xxx
```
3. 查看帮助文档
man n read      //n:"不同类型"

4. 编译linux系统
chmod 777 stm32mp157d_atk.sh
./stm32mp157d_atk.sh
`uImage`: linux-5.4.31/arch/arm/boot/uImage
`stm32mp157d-atk.dtb`: linux-5.4.31/arch/arm/boot/dts/stm32mp157d-atk.dtb 

5. boot启动
- STM32MP> printenv bootcmd
bootcmd=tftp c2000000 uImage; tftp c4000000 stm32mp157d-atk.dtb;bootm c2000000 - c4000000
- STM32MP> printenv bootargs
bootargs=root=/dev/nfs nfsroot=192.168.1.106:/home/goko/nfs/rootfs,tcp,v3,rsize=8192,wsize=8192 ip=192.168.1.104::192.168.1.106:255.255.255.0:stm32mp:eth0:off nfsrootdebug


**Tip**
Maybe you across this error:
```c
usr/bin/ld: scripts/dtc/dtc-parser.tab.o:(.bss+0x10): multiple definition of 'yylloc'; scripts/dtc/dtc-lexer.lex.o:(.bss+0x0): first defined here
collect2: error: ld returned 1 exit status
```
> edit the file ./linux-rtk/scripts/dtc/dtc-lexer-lex.c, Find the line 'YYLTYPE yylloc' and change it to 'extern YYLTYPE yylloc'